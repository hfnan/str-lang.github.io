# 词法分析(Lexical Analysis)

> * 如何建立一个词法分析器？
> * 词法分析需要做些什么？
> * 目标又是什么？

## 关键字


| keyword | meaning  | re    |
| ------- | -------- | ----- |
| var     | 声明变量 | `var` |

## 符号

#### 算数运算符

| operator | meaning | re    |
| -------- | ------- | ----- |
| +        | 加法    | `[+]` |
| -        | 减法    | `-`   |
| *        | 乘法    | `[*]` |
| /        | 除法    | `/`   |
| %        | 模      | `%`   |

#### 赋值符
`=` 直接赋值

#### 括号

| bracket | meaning | re  |
| ------- | ------- | --- |
| (       | 左括号  | `(` |
| )       | 右括号  | `)` |


##  实现准备

#### 词法规则

> 我们都知道，词法分析就是将输入的源程序字符串分隔成一个一个的 **Token序列**，并将出现的标识符添加到 **符号表** 中。
> 
> 每个Token是一个 *类型* 和 *属性* 的二元组，下面是对上述标志的具体定义

| 类型     | 正则表达式               |
| -------- | ------------------------ |
| 关键字   |                          |
| `var`    | `var`                    |
| 符号     |                          |
| `+`      | `+`                      |
| `-`      | `-`                      |
| `*`      | `*`                      |
| `/`      | `/`                      |
| `%`      | `%`                      |
| `(`      | `(`                      |
| `)`      | `)`                      |
| `=`      | `=`                      |
| 标识符   |                          |
| `id`     | `[a-zA-Z_][a-zA-Z0-9_]*` |
| 常量     |                          |
| `intc`   | `-?[1-9][0-9]*           | 0`          |
| `floatc` | `(-?[1-9][0-9]*          | 0)\.[0-9]*` |
| `strc`   | `.*`                     |
|`strp`|`.*`|


> 在STR语言中，一切 `=` 右边的东西都被视为*字符串*（或者*字符串列表*，关于这个暂且略过），但是它也可能是一个表达式或者其他什么东西，虽然在直接赋值中是作为字符串赋值给变量的，但是在之后的解析中可能会用到它内含的语义。


因此，我们需要在词法分析阶段额外存储相关的信息，即 将具有**特殊含义**的字符串（目前只有表达式一种）的字面值，同其表达式的结构（标识符、常量、运算符等）一起存入符号表。

STR语言省略了显式的输出标识，而用单独一行 **非赋值语句**(即不包含赋值符) 的字符串代替，我们用`strp`来指示这种特别的输出语句。

!> 注意，在STR语言中，对字符串的判定是：从第一个**非空白符**开始，一直到这一行结束(如果没有分隔符的话)(不包含换行符)

#### 数据结构




